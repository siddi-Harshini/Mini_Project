<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Programs - ScholarLens</title>
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style-modern.css">
    <style>
        .program-card:hover {
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            transform: translateY(-5px);
        }

        .filters-sidebar {
            position: sticky;
            top: 90px;
        }

        .btn-primary {
            background: #667eea;
            border-color: #667eea;
        }

        .btn-primary:hover {
            background: #5a67d8;
            border-color: #5a67d8;
        }

        .badge.bg-primary {
            background: #667eea !important;
        }

        .type-badge-internship { background: linear-gradient(135deg, #667eea, #764ba2); }
        .type-badge-fellowship { background: linear-gradient(135deg, #764ba2, #667eea); }
        .type-badge-ambassador { background: linear-gradient(135deg, #667eea, #5a67d8); }
        .type-badge-hackathon { background: linear-gradient(135deg, #764ba2, #9f7aea); }
        .type-badge-conference { background: linear-gradient(135deg, #5a67d8, #667eea); }
        .type-badge-coding-event { background: linear-gradient(135deg, #9f7aea, #764ba2); }
    </style>
</head>
<body>
    <!-- Modern Navigation -->
    <nav class="navbar navbar-expand-lg navbar-modern sticky-top">
        <div class="container">
            <a class="navbar-brand brand-logo" href="index.html">
                <i class="fas fa-graduation-cap"></i> ScholarLens
            </a>
            <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="scholarships.html">Scholarships</a></li>
                    <li class="nav-item"><a class="nav-link active" href="programs.html">Programs</a></li>
                    <li class="nav-item"><a class="nav-link" href="index.html#about">About</a></li>
                    <li class="nav-item"><a class="btn btn-gradient ms-2" href="login.html">Login</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Header Section - Clean & Simple -->
    <section style="background: white; padding: 3rem 0 1rem 0; border-bottom: 1px solid #e5e7eb;">
        <div class="container">
            <div class="text-center mb-4">
                <h1 class="fw-bold mb-3" style="font-size: 2.5rem; color: #1a1a2e;">Programs & Opportunities</h1>
                <p class="text-muted" style="font-size: 1.1rem;">Internships, Hackathons, Fellowships, Conferences and more</p>
                <a href="register.html" class="btn btn-primary btn-lg mt-3 px-5" style="border-radius: 25px;">
                    Register to see your matches
                </a>
            </div>
        </div>
    </section>

    <!-- Feature Section with Image -->
    <section style="background: #f8f9fa; padding: 3rem 0;">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6 mb-4 mb-lg-0">
                    <span class="badge bg-primary mb-3" style="padding: 0.5rem 1rem;">ðŸš€ Internships, Hackathons & More</span>
                    <h2 class="fw-bold mb-3" style="font-size: 2rem; color: #1a1a2e;">Real-world opportunities for growth</h2>
                    <p class="text-muted" style="font-size: 1rem;">Connect with top companies, participate in exciting events, and gain valuable experience through internships, fellowships, and coding competitions</p>
                </div>
                <div class="col-lg-6">
                    <img src="https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=600&q=80" alt="Team Collaboration" class="img-fluid rounded shadow-lg" style="border-radius: 15px;">
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content with Filters -->
    <section style="padding: 3rem 0; background: white;">
        <div class="container">
            <div class="row">
                <!-- Left Sidebar - Filters -->
                <div class="col-lg-3 mb-4">
                    <div class="filters-sidebar" style="background: #f8f9fa; padding: 1.5rem; border-radius: 12px;">
                        <h5 class="fw-bold mb-4">Filters</h5>
                        
                        <!-- Sort -->
                        <div class="mb-4">
                            <label class="form-label fw-semibold small">Sort By</label>
                            <select id="sort-select" class="form-select">
                                <option value="deadline">Deadline (Urgent First)</option>
                                <option value="newest">Newest First</option>
                            </select>
                        </div>

                        <!-- Program Type -->
                        <div class="mb-4">
                            <h6 class="fw-semibold mb-3">Program Type</h6>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="type-all" checked>
                                <label class="form-check-label small" for="type-all">All Types</label>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="type-internship">
                                <label class="form-check-label small" for="type-internship">Internship</label>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="type-hackathon">
                                <label class="form-check-label small" for="type-hackathon">Hackathon</label>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="type-fellowship">
                                <label class="form-check-label small" for="type-fellowship">Fellowship</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="type-conference">
                                <label class="form-check-label small" for="type-conference">Conference</label>
                            </div>
                        </div>

                        <!-- Deadline Filter -->
                        <div class="mb-4">
                            <h6 class="fw-semibold mb-3">Deadline</h6>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="deadline-week">
                                <label class="form-check-label small" for="deadline-week">This Week</label>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="deadline-month">
                                <label class="form-check-label small" for="deadline-month">This Month</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="deadline-3months">
                                <label class="form-check-label small" for="deadline-3months">Next 3 Months</label>
                            </div>
                        </div>

                        <button class="btn btn-outline-secondary w-100" onclick="clearFilters()">Clear Filters</button>
                    </div>
                </div>

                <!-- Right Content - Programs List -->
                <div class="col-lg-9">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h5 class="mb-0"><span id="program-count">0</span> results</h5>
                        <div class="d-flex gap-2">
                            <button class="btn btn-primary btn-sm">Grid</button>
                        </div>
                    </div>

            <!-- Programs Container -->
            <div id="programs-container"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        const API_URL = window.location.origin.replace(/\/$/, '') + '/api';

        const typeColors = {
            'internship': 'type-badge-internship',
            'fellowship': 'type-badge-fellowship',
            'ambassador': 'type-badge-ambassador',
            'hackathon': 'type-badge-hackathon',
            'conference': 'type-badge-conference',
            'coding-event': 'type-badge-coding-event'
        };

        const typeIcons = {
            'internship': '<i class="fas fa-briefcase me-2"></i>',
            'fellowship': '<i class="fas fa-star me-2"></i>',
            'ambassador': '<i class="fas fa-user-tie me-2"></i>',
            'hackathon': '<i class="fas fa-code me-2"></i>',
            'conference': '<i class="fas fa-microphone me-2"></i>',
            'coding-event': '<i class="fas fa-laptop me-2"></i>'
        };

        async function loadPrograms() {
            const sort = document.getElementById('sort-select').value;
            const type = document.getElementById('type-select').value;
            
            let endpoint = sort === 'deadline' ? '/programs/by-deadline' : '/programs';
            if (type) {
                endpoint += `?type=${type}`;
            }
    <script>
        const API_URL = window.location.origin.replace(/\/$/, '') + '/api';

        function clearFilters() {
            document.querySelectorAll('.form-check-input').forEach(checkbox => {
                if (checkbox.id === 'type-all') {
                    checkbox.checked = true;
                } else {
                    checkbox.checked = false;
                }
            });
            document.getElementById('sort-select').value = 'deadline';
            loadPrograms();
        }

        const typeColors = {
            internship: 'type-badge-internship',
            fellowship: 'type-badge-fellowship',
            ambassador: 'type-badge-ambassador',
            hackathon: 'type-badge-hackathon',
            conference: 'type-badge-conference',
            'coding-event': 'type-badge-hackathon'
        };

        const typeIcons = {
            internship: '<i class="fas fa-briefcase me-2"></i>',
            fellowship: '<i class="fas fa-star me-2"></i>',
            ambassador: '<i class="fas fa-user-tie me-2"></i>',
            hackathon: '<i class="fas fa-code me-2"></i>',
            conference: '<i class="fas fa-microphone me-2"></i>',
            'coding-event': '<i class="fas fa-laptop me-2"></i>'
        };

        async function loadPrograms() {
            const sort = document.getElementById('sort-select').value;
            const endpoint = sort === 'deadline' ? '/programs/by-deadline' : '/programs';
            
            try {
                const response = await fetch(`${API_URL}${endpoint}`);
                const data = await response.json();
                
                document.getElementById('program-count').textContent = data.count;
                displayPrograms(data.programs);
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('programs-container').innerHTML = 
                    '<div class="alert alert-danger"><i class="fas fa-exclamation-circle me-2"></i>Error loading programs. Please try again later.</div>';
            }
        }

        function displayPrograms(programs) {
            const container = document.getElementById('programs-container');
            
            if (programs.length === 0) {
                container.innerHTML = '<div class="alert alert-info text-center py-5"><i class="fas fa-info-circle me-2"></i>No programs available. Try adjusting your filters.</div>';
                return;
            }
            
            container.innerHTML = '<div class="row g-3">' + programs.map(p => {
                const daysLeft = Math.ceil((new Date(p.deadline) - new Date()) / (1000 * 60 * 60 * 24));
                const isUrgent = daysLeft <= 30;
                const typeColor = typeColors[p.type] || 'type-badge-internship';
                
                return `
                    <div class="col-md-6">
                        <div class="program-card" style="background: white; border: 1px solid #e5e7eb; border-radius: 8px; padding: 1.25rem; height: 100%; transition: all 0.3s ease;">
                            <div class="mb-2">
                                <span class="badge" style="background: #e0e7ff; color: #4f46e5; font-size: 0.7rem; font-weight: 500; padding: 0.25rem 0.6rem; margin-right: 0.25rem; border-radius: 4px;">${p.type.replace('-', ' ')}</span>
                                ${p.tags ? p.tags.slice(0, 2).map(tag => `<span class="badge" style="background: #f3f4f6; color: #4b5563; font-size: 0.7rem; font-weight: 500; padding: 0.25rem 0.6rem; margin-right: 0.25rem; border-radius: 4px;">${tag}</span>`).join('') : ''}
                            </div>
                            <h5 class="fw-bold mb-2" style="color: #1a1a2e; font-size: 1.1rem; line-height: 1.4;">${p.title}</h5>
                            <p class="mb-2" style="color: #6b7280; font-size: 0.9rem;"><i class="fas fa-building me-1" style="font-size: 0.8rem;"></i>${p.provider}</p>
                            <p class="text-muted mb-3" style="font-size: 0.875rem; line-height: 1.5; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical;">${p.description}</p>
                            ${p.duration ? `<p class="mb-1" style="font-size: 0.8rem; color: #6b7280;"><i class="fas fa-clock me-1"></i>${p.duration}</p>` : ''}
                            ${p.location ? `<p class="mb-2" style="font-size: 0.8rem; color: #6b7280;"><i class="fas fa-map-marker-alt me-1"></i>${p.location}</p>` : ''}
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <small class="text-muted" style="font-size: 0.8rem;"><strong>CGPA:</strong> ${p.eligibility?.minCGPA || 'Any'}</small>
                                <small style="font-weight: 600; color: ${isUrgent ? '#dc2626' : '#667eea'}; font-size: 0.85rem;">
                                    ${isUrgent ? '<i class="fas fa-exclamation-circle me-1"></i>' : ''}${daysLeft}d left
                                </small>
                            </div>
                            <a href="${p.applicationLink || 'https://www.google.com/search?q=' + encodeURIComponent(p.title + ' ' + p.provider)}" target="_blank" class="btn btn-primary w-100" style="background: #2563eb; border: none; padding: 0.6rem; font-weight: 600; border-radius: 6px;">Apply</a>
                        </div>
                    </div>
                `;
            }).join('') + '</div>';
        }

        document.getElementById('sort-select').addEventListener('change', loadPrograms);
        loadPrograms();
    </script>

    <!-- Footer -->
    <footer class="footer-modern py-5" style="background: #1a1a2e; color: #fff; margin-top: 3rem;">
        <div class="container">
            <div class="row mb-4">
                <div class="col-md-4 mb-4 mb-md-0">
                    <h6 class="fw-bold mb-3"><i class="fas fa-graduation-cap me-2" style="color: #667eea;"></i>ScholarLens</h6>
                    <p class="small">Empowering students to achieve their dreams through scholarships. Join 10,000+ successful scholars today.</p>
                </div>
                <div class="col-md-4 mb-4 mb-md-0">
                    <h6 class="fw-bold mb-3">Quick Links</h6>
                    <ul class="list-unstyled small">
                        <li class="mb-2"><a href="scholarships.html" class="text-muted text-decoration-none hover-link">Scholarships</a></li>
                        <li class="mb-2"><a href="programs.html" class="text-muted text-decoration-none hover-link">Programs</a></li>
                        <li class="mb-2"><a href="login.html" class="text-muted text-decoration-none hover-link">Login</a></li>
                        <li class="mb-2"><a href="register.html" class="text-muted text-decoration-none hover-link">Register</a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <h6 class="fw-bold mb-3">Follow Us</h6>
                    <div class="d-flex gap-3">
                        <a href="#" class="text-muted hover-link"><i class="fab fa-twitter fa-lg"></i></a>
                        <a href="#" class="text-muted hover-link"><i class="fab fa-facebook fa-lg"></i></a>
                        <a href="#" class="text-muted hover-link"><i class="fab fa-linkedin fa-lg"></i></a>
                        <a href="#" class="text-muted hover-link"><i class="fab fa-instagram fa-lg"></i></a>
                    </div>
                </div>
            </div>
            <hr style="border-color: #444;">
            <p class="text-center small text-muted mb-0">&copy; 2026 ScholarLens. All rights reserved. | <a href="#" class="text-muted text-decoration-none">Privacy Policy</a> | <a href="#" class="text-muted text-decoration-none">Terms & Conditions</a></p>
        </div>
    </footer></body>
</html>
